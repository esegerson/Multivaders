<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multivaders</title>
    <script src="game.js"></script>
    <script src="music.js"></script>
    <script src="ui.js"></script>
    <script src="orbiters.js"></script>
    <link rel="stylesheet" href="game.css" />
</head>
<body>
    <div id="gameTitle">
        <h1>Multivaders!</h1>
        <p>Multivaders is a thrilling space shooter game where you defend your planet from waves of alien invaders. Solve multiplication problems to defeat the enemies!</p>
        <p>Select what multiplication facts you'd like to work with:</p>
        <p id="presetButtons">Presets: 
            <button class="hardcoded" onclick="preset(1)" onmouseover="hoverPreset(this)" onmouseout="clearHoverPreset()">Set A</button> 
            <button class="hardcoded" onclick="preset(2)" onmouseover="hoverPreset(this)" onmouseout="clearHoverPreset()">Set B</button>
            <button class="hardcoded" onclick="preset(3)" onmouseover="hoverPreset(this)" onmouseout="clearHoverPreset()">Set C</button>
            <button class="hardcoded" onclick="preset(4)" onmouseover="hoverPreset(this)" onmouseout="clearHoverPreset()">Set D</button>
            <button class="hardcoded" onclick="preset(5)" onmouseover="hoverPreset(this)" onmouseout="clearHoverPreset()">Set E</button>
            <span id="presetList"></span>
            <span class="savePresetContainer">
                <button id="btnMakePreset" disabled onclick="openPresetModal()" title="Select a fact to create a preset">&plus; Make Preset</button>
                <span id="presetSave" style="display: none;">
                    <input type="text" id="setname" placeholder="Preset Name" maxlength="20"/>
                    <button onclick="savePreset()" title="Save Preset">&#x2714;</button>
                    <button onclick="closeNewPresetUi()" title="Cancel">&#x2716;</button>
                </span>
            </span>
            <button id="btnDeletePreset" disabled onclick="deletePreset(this)" title="No custom presets to delete">&minus; Delete Preset</button>
            <button id="btnClear" disabled onclick="clearSelection()" title="No facts to clear">Clear</button>
        </p>
        <div class="grid"></div>
        <p>
            <button id="startGame" onclick="start();" disabled title="Select at least one fact to play">Start Game</button> 
            <button id="btnViewHighScores" onclick="viewHighScoresMainMenu()" style="display: none">View High Scores</button>
            <span id="setNote" style="display: none;">High scores are saved only with a preset; select or make a preset to save your high score.</span>
        </p>
        <p>Tips:</p>
        <ul class="tips">
            <li>Type <span>numbers</span> to complete the problems</li>
            <li>Press <span>Enter</span> to submit your answer</li>
            <li>Answering incorrectly will make the problem speed up!</li>
            <li>Game over when the problem touches the bottom of the screen</li>
            <li>Press <span>Backspace</span> to erase</li>
            <li>Press <span>Spacebar</span> to pause</li>
            <li>Press <span>Escape</span> to quit</li>
            <li>Press <span>Left</span> or <span>Right</span> to target a different problem</li>
            <li>Problems moving left or right are "runners"&mdash;solve them to activate a multishot upgrade!
                <ul><li>The upgrade is good for four problems, so choose wisely, if you can</li>
                    <li>This upgrade solves all similar problems on the screen at the same time</li>
                    <li>Works best on a crowded screen</li>
                    <li>If you haven't typed anything, press <span>Enter</span> to quickly select the "runner"</span></li>
                </ul>
            </li>
            <li><span>1</span> point for every problem solved</li>
            <li><span>4</span> extra points if you clear the screen</li>
            <li><span>8</span> extra points if you clear the screen soon after the last clear</li>
            <li>The game gets harder the more points you score!  Can you beat <span>100</span>?</span></li>
        </ul>

        <!--<p>Coming Soon:</p>
        <ul class="tips">
            <li></li>
        </ul>-->
    </div>

    <div id="gameContainer" class="max" style="display: none;">
        <div class="score">Score: <span id="score">0</span></div>
        <div id="tipContainer"></div>
        <div class="decoration">
            <div id="svgContainer">
                <svg id="svgLaser" class="max">
                    <defs>
                        <radialGradient id="laserGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                            <stop offset="0%" style="stop-color:yellow;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:yellow;stop-opacity:0" />
                        </radialGradient>
                    </defs>
                    <g id="sparks" />
                </svg>
                <svg id="svgFX" class="max">
                    <linearGradient id="fadeLine" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="white" stop-opacity="0"></stop>
                        <stop offset="50%" stop-color="white" stop-opacity="1"></stop>
                        <stop offset="100%" stop-color="white" stop-opacity="0"></stop>
                    </linearGradient>
                    <g id="orbitersFront" />
                    <g id="networkLines" />
                </svg>
            </div>
            <div class="turret" id="turret">
                <div class="circle"></div>
                <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <clipPath id="myClip">
                            <ellipse cx="50" cy="50" rx="50" ry="50" id="svg_2"/>
                        </clipPath>
                        <radialGradient cy="0.36406" cx="0.42969" spreadMethod="pad" id="radgrad">
                            <stop offset="0" stop-color="#3f7f00"/>
                            <stop offset="1" stop-opacity="0.99609" stop-color="#2b5600"/>
                        </radialGradient>
                        <!-- The filter region is expanded to accommodate the large shadow -->
                        <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                            <feDropShadow dx="0" dy="0" stdDeviation="100" flood-color="#000" flood-opacity="0.9"/>
                        </filter>
                    </defs>
                    <g clip-path="url(#myClip)" filter="url(#shadow)">
                        <g>
                            <ellipse fill="url(#radgrad)" cx="50" cy="50" id="ball" rx="50" ry="50"/>
                        </g>
                        <path d="m10.75,81c2.5,-27.75 43.25,-73 64.75,-74c21.5,-1 42.25,2.25 9.75,7c-32.5,4.75 -58,59.25 -61.25,78.5c-3.25,19.25 -15.75,16.25 -13.25,-11.5z" fill="#000"/>
                        <path d="m93.30566,79.5c-2.78931,-27.75 -48.25498,-73 -72.24301,-74c-23.98803,-1 -47.13926,2.25 -10.87829,7c36.26097,4.75 64.71189,59.25 68.33798,78.5c3.6261,19.25 17.57262,16.25 14.78332,-11.5z" fill="#000"/>
                    </g>
                </svg>
            </div>
        </div>
        <div class="background">&#215;</div>
        <div class="background2"></div>
        <div id="statsContainer"></div>
        <div id="vaderContainer"></div>
        <div id="svgContainerBehind">
            <svg id="svgBehind" class="max">
                <g id="orbitersBehind" />
            </svg>
        </div>
    </div>

    <div id="gameOver" style="display: none;">
        <h1>Game Over</h1>
        <p>Your score: <span id="score2"></span></p>
        <div id="highScoresGameOver" style="display: none;">
            <svg id="nameSparks" class="max">
                <defs>
                    <radialGradient id="nameDotGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                        <stop offset="0%" style="stop-color:yellow;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:yellow;stop-opacity:0" />
                    </radialGradient>
                </defs>
                <g id="nameSparksGroup" />
            </svg>
            <h2>High Scores</h2>
            <h3 title="Set name"></h3>
            <p id="noset">To save your high scores, save this as a set.</p>
            <p style="display: none;">New High Score! Type your initials and press Enter to submit:</p>
            <ol class="highscorelist">
                <li><dl><dt>---</dt><dd>90</dd><dd>11/1/2025</dd></dl></li>
                <li><dl><dt>---</dt><dd>60</dd><dd>11/1/2025</dd></dl></li>
                <li><dl><dt>---</dt><dd>30</dd><dd>11/1/2025</dd></dl></li>
            </ol>
            <input type="text" id="initialsInput" maxlength="3" style="display: none;" />
        </div>
        <div id="gameOverButtons" style="display: none;">
            <button id="btnPlayAgain" onclick="playAgain();">Play Again</button>
            <button id="btnMainMenu" onclick="location.reload();">Main Menu</button>        
        </div>
    </div>

    <div id="paused" style="display: none;">
        <p>Paused</p>
        <p>Press spacebar to continue</p>
        <p>Score: <span id="pauseScore"></span></p>
    </div>

    <div id="highScoresMainMenu" style="display: none;">
        <div class="container">
            <h1>High Scores</h1>
            <h3></h3>
            <ol class="highscorelist">
                <li><dl><dt>---</dt><dd>90</dd><dd>11/1/2025</dd></dl></li>
                <li><dl><dt>---</dt><dd>60</dd><dd>11/1/2025</dd></dl></li>
                <li><dl><dt>---</dt><dd>30</dd><dd>11/1/2025</dd></dl></li>
            </ol>
            <button onclick="returnToMainMenuFromHighScores();">Main Menu</button>
        </div>
    </div>
    
    <div id="templates" style="display: none;">
        <div id="vaderTemplate" class="vader">
            <table>
                <tr><td class="factA" colspan="2"></td></tr>
                <tr><td class="operator">&#215;</td><td class="factB"></td></tr>
                <tr><td class="result" colspan="2">&nbsp;</td></tr>
            </table>
        </div>
    </div>

    <audio src="calm-soft-background-music-357212.mp3" id="gameMusic" loop></audio>
</body>
</html>